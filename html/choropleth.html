<!DOCTYPE html>
<html>
<head>
    <title>Choropleth</title>
    <style>
        .active { fill: blue !important;}
        /*.datamaps-key dt, .datamaps-key dd {float: none !important;}
        .datamaps-key {right: -50px; top: 0;}*/
    </style>

    <script src="dist/bundle.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <input type="text" id="tag-input" onkeyup="switchTag()" />
    <div id="choropleth-container" style="border:0px; width: 1200px; height: 800px; position: relative;"></div>

    <script>
        var dataset = stacktrends.choropleth.loadData();
        var map = stacktrends.choropleth.draw("choropleth-container");

        function switchTag() {
            var tag = document.getElementById("tag-input").value;
            dataset.then(function(d) {
                if(d[tag] !== undefined) {
                    console.log("Switching tag to " + tag);
                    map.updateChoropleth(d[tag], {reset: true});
                } else {
                    map.updateChoropleth(null, {reset: true});
                }
            });
        }
    </script>
</body>
</html>
